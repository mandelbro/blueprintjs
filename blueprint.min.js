var Blueprint=function(e,t,n,r){var i=function(e,t){return new i.fn.init(e,t)};i.fn=i.prototype={constructor:i,init:function(t,n){var t=e.extend(!0,{},this.fn,t);if(n instanceof e||e.zepto.isZ(n))n={main:n};t.elements=n;t.templates={};t.model={};t.dataScan(n.main);typeof t.construct=="function"&&t.construct();return t}};i.fn.init.prototype=i;i.fn.theme=function(n,r,i){var s=this,o;if(typeof this.templates[n]!="function")return;i=e.extend({insertMethod:"append",offsetElement:{},preprocess:null,postprocess:null,afterInsert:null},i);r=r?r:{};typeof i.preprocess=="function"&&i.preprocess.apply(this,[r]);var o=this.templates[n](r);typeof i.postprocess=="function"&&i.postprocess.apply(this,[o]);if(!i.offsetElement.length)return o;i.offsetElement[i.insertMethod](o);typeof i.afterInsert=="function"&&t.setTimeout(function(){i.afterInsert.call(s,[o])},10);return o};i.fn.dataScan=function(t){if(!t)return;t.main.find(".json").each(function(){var t=e(this),n=t.attr("id")||"data";viewController.model[n]=e.extend(viewController.model[n],e.parseJSON(t.text().remove()))})};i.fn.data=function(t,n){t=t||"data";if(typeof t=="object"){e.extend(this.model,t);return this}if(typeof n!="undefined"){this.model[t]=n;return this}return this.model[t]};return i}(typeof Zepto=="undefined"?jQuery:Zepto,window,document);